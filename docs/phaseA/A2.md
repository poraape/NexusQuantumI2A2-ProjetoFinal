# A2 — Caracterização de APIs e Contratos

## Endpoints Planejados
O arquivo `openapi.yaml` captura a camada BFF proposta para manter compatibilidade com o front-end atual, fornecendo rotas para upload assíncrono (`/uploads`), consultas de relatórios (`/reports/{sessionId}`), conversas contextualizadas (`/chat/{sessionId}`) e exportação (`/exports/{sessionId}`). Cada rota foi desenhada a partir dos serviços consumidos hoje pelo componente `App.tsx`, isolando responsabilidades em endpoints estáveis.

## Esquemas Versionados
Os esquemas JSON localizados em `schemas/` descrevem os payloads mínimos necessários para preservar os contratos existentes com o front-end. Eles incluem metadados de sessão, controle de formatos de exportação e estrutura de evidências retornadas pelos agentes cognitivos.

## SLAs e Erros
- **/uploads**: responde 202 em até 300 ms para sinalizar aceitação do lote e fornece `retryAfterMs` em caso de limitação.
- **/reports**: garante resposta 200 em até 2 s quando relatórios consolidados estão prontos; 404 se a sessão ainda não gerou dados.
- **/chat**: tempo limite configurado para 4 s (retornando 504 se excedido), alinhado com as metas do agente cognitivo.
- **/exports**: responde 200 quando o arquivo está pronto e 409 caso existam pendências de validação.

## Próximos Passos
1. Implementar adaptadores Ports/Adapters que mapeiem os contratos atuais de `services/` para as rotas descritas.
2. Gerar automaticamente artefatos OpenAPI durante o build para manter versionamento semântico.
3. Publicar os schemas em um registry interno para facilitar validações de compatibilidade.
